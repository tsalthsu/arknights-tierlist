<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arknights Skin Tier List</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <style>
        /* --- 기본 스타일 (PRTS 위키 분위기) --- */
        body {
            background-color: #1a1a1a;
            color: #ffffff;
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 2px solid #444;
            padding-bottom: 10px;
        }

        /* --- 컨트롤 패널 (버튼 영역) --- */
        .controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }

        .btn {
            background-color: #444;
            color: white;
            border: 1px solid #666;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 1rem;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .btn:hover { background-color: #666; }
        .btn-add { background-color: #2e7d32; border-color: #1b5e20; }
        .btn-add:hover { background-color: #388e3c; }

        /* --- 티어 리스트 컨테이너 --- */
        .tier-container {
            width: 100%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 50px;
        }

        .tier-row {
            display: flex;
            min-height: 160px;
            background-color: #222;
            border: 1px solid #444;
            position: relative;
        }

        /* 티어 라벨 (S, A, B...) */
        .tier-label {
            width: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            flex-shrink: 0;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
            cursor: text; /* 수정 가능함을 표시 */
            color: #333; /* 글자색 어둡게 */
        }
        
        .tier-label:focus {
            outline: 2px solid #fff;
            background-color: rgba(255,255,255,0.8);
        }

        /* 아이템이 들어가는 영역 */
        .tier-content {
            flex-grow: 1;
            padding: 10px;
            padding-right: 40px; /* 삭제 버튼 공간 확보 */
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            background-color: #2b2b2b;
            align-content: flex-start;
        }

        /* 삭제 버튼 (X) */
        .delete-btn {
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            width: 30px;
            background-color: #333;
            color: #888;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-left: 1px solid #444;
            transition: background 0.2s;
        }
        .delete-btn:hover {
            background-color: #550000;
            color: white;
        }

        /* --- 아이템 대기열 (Unranked) --- */
        .pool-section {
            width: 100%;
            max-width: 1200px;
            border: 2px dashed #555;
            padding: 20px;
            background-color: #222;
        }
        
        .pool-title {
            margin-top: 0;
            margin-bottom: 15px;
            color: #aaa;
        }

        .item-pool {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            min-height: 200px;
        }

        /* --- 카드 디자인 --- */
        .skin-card {
            width: 100px;
            height: 180px;
            background-color: #333;
            border: 1px solid #555;
            cursor: grab;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        .skin-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            pointer-events: none;
        }

        .skin-card:hover {
            transform: translateY(-7px) scale(1.02);
            box-shadow: 0 10px 20px rgba(0,0,0,0.6);
            border-color: #fff;
            z-index: 10;
        }
        .skin-card.sortable-ghost { opacity: 0.4; }
        .skin-card.sortable-drag { cursor: grabbing; }

    </style>
</head>
<body>

    <h1>Arknights Skin Tier List</h1>

    <div class="controls">
        <button class="btn btn-add" onclick="addTier()">+ 티어 추가</button>
        <button class="btn" onclick="resetTiers()">초기화 (S/A/B)</button>
    </div>

    <div class="tier-container" id="tier-container">
        </div>

    <div class="pool-section">
        <h3 class="pool-title">스킨 목록 (드래그하여 위로 이동)</h3>
        <div class="item-pool" id="pool"></div>
    </div>

    <script>
        // --- 1. 설정 (색상 및 기본값) ---
        const tierColors = ['#ff7f7f', '#ffbf7f', '#ffff7f', '#7fff7f', '#7fbfff', '#7f7fff', '#ff7fff', '#bfbfbf'];
        const defaultLabels = ['S', 'A', 'B', 'C', 'D', 'E', 'F'];
        
        // 이미지 경로 설정 (업로드하신 폴더 구조 기준)
        const pathPrefix = "img/"; 
        const totalImages = 110; // 넉넉하게 잡음

        // --- 2. 초기화 실행 ---
        const container = document.getElementById('tier-container');
        const poolElement = document.getElementById('pool');

        // (1) 이미지 로딩
        function loadImages() {
            poolElement.innerHTML = ''; // 초기화
            for (let i = 1; i <= totalImages; i++) {
                const number = String(i).padStart(3, '0');
                const imgName = `skin_${number}.png`;
                
                const card = document.createElement('div');
                card.className = 'skin-card';
                card.innerHTML = `<img src="${pathPrefix}${imgName}" onerror="this.parentElement.style.display='none'">`;
                poolElement.appendChild(card);
            }
            // Pool 영역 드래그 활성화
            new Sortable(poolElement, { group: 'shared', animation: 150 });
        }

        // (2) 티어 행 생성 함수
        function createTierRow(labelText = 'New', colorCode = '#ccc') {
            const row = document.createElement('div');
            row.className = 'tier-row';

            // 라벨 (S, A, B...)
            const label = document.createElement('div');
            label.className = 'tier-label';
            label.textContent = labelText;
            label.style.backgroundColor = colorCode;
            label.contentEditable = true; // 클릭해서 글자 수정 가능
            
            // 아이템 영역
            const content = document.createElement('div');
            content.className = 'tier-content';

            // 삭제 버튼
            const delBtn = document.createElement('div');
            delBtn.className = 'delete-btn';
            delBtn.innerHTML = '×';
            delBtn.onclick = function() {
                // 안에 아이템이 있으면 Pool로 돌려보내기 (선택사항)
                const items = Array.from(content.children);
                items.forEach(item => poolElement.appendChild(item));
                row.remove();
            };

            row.appendChild(label);
            row.appendChild(content);
            row.appendChild(delBtn);
            container.appendChild(row);

            // 해당 티어 영역 드래그 활성화
            new Sortable(content, {
                group: 'shared',
                animation: 150,
                ghostClass: 'sortable-ghost'
            });
        }

        // (3) 티어 추가 버튼 동작
        function addTier() {
            const currentCount = container.children.length;
            // 순서대로 라벨 가져오기 (없으면 그냥 비워둠)
            const nextLabel = defaultLabels[currentCount] || String.fromCharCode(65 + currentCount); // A, B, C... 자동
            // 색상 순환
            const nextColor = tierColors[currentCount % tierColors.length];
            
            createTierRow(nextLabel, nextColor);
        }

        // (4) 초기 S, A, B 세팅
        function resetTiers() {
            // 기존 아이템들 다 대기열로 복귀
            const allItems = document.querySelectorAll('.tier-content .skin-card');
            allItems.forEach(item => poolElement.appendChild(item));
            
            container.innerHTML = '';
            createTierRow('S', tierColors[0]);
            createTierRow('A', tierColors[1]);
            createTierRow('B', tierColors[2]);
        }

        // --- 실행 ---
        window.onload = function() {
            loadImages();
            resetTiers();
        };

    </script>
</body>
</html>
